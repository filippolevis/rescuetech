<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RescueTech</title>
    <style>
        html, body { height: 100%; margin: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #ffffff; color: #000000; }
        .wrapper { display: flex; flex-direction: column; min-height: 100vh; }
        header { background-color: #ffffff; color: black; padding: 20px; text-align: center; }
        .logo { width: 180px; margin-top: 10px; margin-bottom: 10px; }
        .subtitle { font-size: 1.2em; margin-top: 10px; }
        .marquee { background-color: #107C41; color: white; overflow: hidden; white-space: nowrap; box-sizing: border-box; font-style: italic; height: 30px; display: flex; align-items: center; }
        .marquee-content { display: inline-block; padding-left: 100%; animation: marquee 50s linear infinite; }
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        nav { background-color: #ffffff; display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; padding: 15px; }
        nav a { color: black; text-decoration: none; font-weight: bold; }
        nav a:hover { text-decoration: underline; }
        .main-section { flex: 1; padding: 40px 20px; text-align: center; }
        .contact-button { display: inline-block; background-color: #107C41; color: white; padding: 12px 24px; margin-top: 20px; text-decoration: none; font-weight: bold; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); }
        .contact-button:hover { background-color: #0b5c30; }
        footer { background-color: #0B2B40; color: white; text-align: center; padding: 10px; font-size: 0.9em; }
        @media (max-width: 600px) {
            .logo { width: 140px; }
        }
    </style>
</head>
<body>
<div class="wrapper">
<header>
    <img src="/rescuetech/logo.PNG" alt="RescueTech Logo" class="logo">
    <div class="subtitle">Fast and professional repair of smartphones, laptops, smartwatches, and more.</div>
</header>
<div class="marquee">
  <div class="marquee-content">
    Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </div>
</div>
<nav>
    <a href="/rescuetech/services.html">Services</a>
    <a href="/rescuetech/about-us.html">About Us</a>
    <a href="/rescuetech/contact.html">Contact</a>
    <a href="/rescuetech/faq.html">FAQ</a>
</nav>
<div class="main-section">
    <h2>Welcome to RescueTech!</h2>
    <p>Specialized in fast and reliable repairs. Whether it's a cracked screen, software issues, or water-damaged devices, we're ready to help you!</p>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfUNiOVqh36fpYi9ozFGv43HxrnsrYYKDV7znsnkVEhN0-lNA/viewform?embedded=true" class="contact-button" target="_blank">Request a Repair</a>
</div>
<footer>
    &copy; 2025 RescueTech. All rights reserved.
</footer>
</div>
<style>
    #botChatButton { position: fixed; bottom: 20px; right: 20px; background-color: #107C41; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 30px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; }
        #chatBox { position: fixed; bottom: 90px; right: 20px; width: 300px; max-height: 400px; background: white; border: 1px solid #ccc; border-radius: 10px; display: none; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; }
        #chatHeader { background: #107C41; color: white; padding: 10px; border-top-left-radius: 10px; border-top-right-radius: 10px; text-align: center; font-weight: bold; }
        #chatContent { flex: 1; padding: 10px; overflow-y: auto; font-size: 0.95em; }
        #chatInput { display: flex; padding: 10px; border-top: 1px solid #ddd; }
        #chatInput input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
        #chatInput button { background: #107C41; color: white; border: none; padding: 8px 10px; margin-left: 5px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

<div class="main-section">
    <h1>About RescueTech</h1>
    <p>We provide professional repairs for smartphones, laptops, and smartwatches with transparent pricing and fast service.</p>
</div>

<button id="botChatButton">üí¨</button>
<div id="chatBox">
    <div id="chatHeader">RescueBot</div>
    <div id="chatContent">
        <p>Welcome! Please choose your language:</p>
        <button onclick="setLanguage('en')">üá¨üáß English</button>
        <button onclick="setLanguage('it')">üáÆüáπ Italian</button>
        <button onclick="setLanguage('es')">üá™üá∏ Spanish</button>
    </div>
    <div id="chatInput" style="display: none;">
        <input type="text" id="userInput" placeholder="Type your message...">
        <button id="changeLangButton" title="Change language">üåê</button>
        <button id="sendButton">Send</button>
    </div>
</div>

<script>
    const chatButton = document.getElementById('botChatButton');
    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');
    let userLang = null;
    const apiKey = 'AIzaSyBx-3LSoYXKHVYhHY3WTlNIiETNdAh5j98';
    let servicesData = [];
    let extraData = [];
    
    // Load services table
    async function loadServicesData() {
        try {
            const response = await fetch('services.html');
            const text = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(text, 'text/html');
            const table = doc.querySelector('table');
            if (table) {
                table.querySelectorAll('tr').forEach((row, index) => {
                    if (index === 0) return; // skip header
                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 2) {
                        servicesData.push({
                            service: cells[0].innerText.trim().toLowerCase(),
                            price: cells[1].innerText.trim()
                        });
                    }
                });
            }
        } catch (error) {
            console.error('Failed to load services data:', error);
        }
    }
    
    // Load contact and FAQ data
    async function loadExtraData() {
        const pages = ['contact.html', 'faq.html'];
        for (let page of pages) {
            try {
                const response = await fetch(page);
                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                const extra = doc.querySelector('#botDataExtra');
                if (extra) {
                    extraData.push(extra.innerText.trim());
                }
            } catch (error) {
                console.error(`Failed to load ${page}:`, error);
            }
        }
        // Include this page's extra data
        const localExtra = document.getElementById('botDataExtra');
        if (localExtra) {
            extraData.push(localExtra.innerText.trim());
        }
    }
    
    chatButton.addEventListener('click', () => {
        chatBox.style.display = (chatBox.style.display === 'none' || chatBox.style.display === '') ? 'flex' : 'none';
    });
    document.getElementById('sendButton').addEventListener('click', () => {
        const input = document.getElementById('userInput').value.trim();
        if (input) {
            addMessage('You', input);
            processAndRespond(input);
            document.getElementById('userInput').value = '';
        }
    });
    document.getElementById('changeLangButton').addEventListener('click', () => {
        const chatContent = document.getElementById('chatContent');
        chatContent.innerHTML += `<div><strong>RescueBot:</strong> Please select your new language:</div>`;
        chatContent.innerHTML += `
            <button onclick=\"setLanguage('en')\">üá¨üáß English</button>
            <button onclick=\"setLanguage('it')\">üáÆüáπ Italian</button>
            <button onclick=\"setLanguage('es')\">üá™üá∏ Spanish</button>
        `;
        chatContent.scrollTop = chatContent.scrollHeight;
    });
    
    function setLanguage(lang) {
        userLang = lang;
        const chatContent = document.getElementById('chatContent');
        chatContent.innerHTML += `<div><strong>RescueBot:</strong> Great! You selected: ${lang.toUpperCase()}.</div>`;
        chatContent.innerHTML += `<div><strong>RescueBot:</strong> Now you can ask me anything üëá</div>`;
        chatInput.style.display = 'flex';
    }
    
    async function processAndRespond(userInput) {
        const translatedInput = await translateText(userInput, 'en');
        let bestMatch = null;
    
        // Check services
        for (let item of servicesData) {
            if (translatedInput.toLowerCase().includes(item.service.slice(0, 5))) {
                bestMatch = `${capitalize(item.service)} costs ${item.price}.`;
                break;
            }
        }
    
        // Check extra data
        if (!bestMatch) {
            for (let info of extraData) {
                if (translatedInput.toLowerCase().includes(info.slice(0, 5).toLowerCase())) {
                    bestMatch = info;
                    break;
                }
            }
        }
    
        const fallback = "I'm sorry, I couldn't find an answer to that question.";
    
        if (bestMatch) {
            if (userLang && userLang !== 'en') {
                translateText(bestMatch, userLang).then(translated => {
                    addMessage('RescueBot', translated);
                }).catch(() => {
                    addMessage('RescueBot', bestMatch + " (Translation failed)");
                });
            } else {
                addMessage('RescueBot', bestMatch);
            }
        } else {
            addMessage('RescueBot', fallback);
        }
    }
    
    function addMessage(sender, text) {
        const chatContent = document.getElementById('chatContent');
        const msg = document.createElement('div');
        msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
        msg.style.marginBottom = '10px';
        chatContent.appendChild(msg);
        chatContent.scrollTop = chatContent.scrollHeight;
    }
    
    async function translateText(text, targetLang) {
        const url = `https://translation.googleapis.com/language/translate/v2?key=${apiKey}`;
        const response = await fetch(url, {
            method: 'POST',
            body: JSON.stringify({ q: text, target: targetLang, format: 'text' }),
            headers: { 'Content-Type': 'application/json' }
        });
        const data = await response.json();
        if (data && data.data && data.data.translations && data.data.translations[0]) {
            return data.data.translations[0].translatedText;
        } else {
            throw new Error('Translation failed');
        }
    }
    
    function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
    }
    
    window.addEventListener('load', () => {
        chatBox.style.display = 'none';
        loadServicesData();
        loadExtraData();
    });
    </script>
    <div id="botDataExtra" style="display:none;">
        General info:
        RescueTech specializes in fast and professional repair of smartphones, laptops, smartwatches, and more. Open Monday-Friday 6PM-9PM and Weekend 9AM-9PM.
    
        Keywords:
        "what do you repair"
        "services you offer"
        "business hours"
        "opening hours"
        "quando siete aperti"
        "orari di apertura"
        "cosa riparate"
        "qu√© reparan"
        "horarios de apertura"
        "qu√© servicios ofrecen"
    </div>
</body>
</html>
